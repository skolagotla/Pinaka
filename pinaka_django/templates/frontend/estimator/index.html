{% extends 'frontend/base.html' %}

{% block title %}Rent Estimator - Pinaka{% endblock %}

{% block content %}
<div class="px-4 sm:px-6 lg:px-8">
    <div class="sm:flex sm:items-center mb-8">
        <div class="sm:flex-auto">
            <h1 class="text-3xl font-bold text-gray-900">Rent Estimator</h1>
            <p class="mt-2 text-sm text-gray-600">Estimate rent costs for properties</p>
        </div>
    </div>

    <div class="bg-white shadow rounded-lg p-8">
        <form id="estimator-form" class="space-y-6">
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Property Type</label>
                    <select id="property-type" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option value="apartment">Apartment</option>
                        <option value="house">House</option>
                        <option value="condo">Condo</option>
                        <option value="townhouse">Townhouse</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Bedrooms</label>
                    <input type="number" id="bedrooms" min="0" max="10" value="1" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Bathrooms</label>
                    <input type="number" id="bathrooms" min="0" max="10" step="0.5" value="1" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Square Feet</label>
                    <input type="number" id="square-feet" min="0" value="800" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Location (City)</label>
                    <input type="text" id="location" placeholder="e.g., Toronto" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                    <select id="country" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <option value="CA">Canada</option>
                        <option value="US">United States</option>
                    </select>
                </div>
            </div>
            
            <button type="button" onclick="calculateRent()" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700">
                <i class="fas fa-calculator mr-2"></i>Estimate Rent
            </button>
        </form>

        <div id="estimate-result" class="mt-8 hidden">
            <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-green-900 mb-2">Estimated Monthly Rent</h3>
                <div class="text-4xl font-bold text-green-600" id="estimated-rent">$0</div>
                <p class="text-sm text-green-700 mt-2" id="estimate-range"></p>
            </div>
        </div>
    </div>
</div>

<script>
function calculateRent() {
    const propertyType = document.getElementById('property-type').value;
    const bedrooms = parseInt(document.getElementById('bedrooms').value) || 1;
    const bathrooms = parseFloat(document.getElementById('bathrooms').value) || 1;
    const squareFeet = parseInt(document.getElementById('square-feet').value) || 800;
    const location = document.getElementById('location').value;
    const country = document.getElementById('country').value;
    
    // Simple estimation algorithm
    let baseRent = 0;
    
    // Base rent by property type
    const typeMultipliers = {
        'apartment': 1.0,
        'condo': 1.2,
        'townhouse': 1.3,
        'house': 1.5,
    };
    
    // Base rent calculation (simplified)
    baseRent = squareFeet * (country === 'CA' ? 1.5 : 1.2); // $ per sqft
    baseRent *= typeMultipliers[propertyType] || 1.0;
    baseRent += (bedrooms * (country === 'CA' ? 200 : 150));
    baseRent += (bathrooms * (country === 'CA' ? 100 : 80));
    
    // Location multiplier (simplified)
    if (location.toLowerCase().includes('toronto') || location.toLowerCase().includes('vancouver')) {
        baseRent *= 1.3;
    } else if (location.toLowerCase().includes('montreal') || location.toLowerCase().includes('calgary')) {
        baseRent *= 1.1;
    }
    
    const estimatedRent = Math.round(baseRent);
    const minRent = Math.round(estimatedRent * 0.85);
    const maxRent = Math.round(estimatedRent * 1.15);
    
    document.getElementById('estimated-rent').textContent = '$' + estimatedRent.toLocaleString();
    document.getElementById('estimate-range').textContent = `Estimated range: $${minRent.toLocaleString()} - $${maxRent.toLocaleString()}/month`;
    document.getElementById('estimate-result').classList.remove('hidden');
}
</script>
{% endblock %}

