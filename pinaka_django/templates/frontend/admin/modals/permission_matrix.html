<!-- Permission Matrix Editor Modal -->
<div id="permission-matrix-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50 flex items-center justify-center">
    <div class="bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto">
        <div class="p-6 border-b border-gray-200">
            <div class="flex justify-between items-center">
                <h3 class="text-xl font-semibold text-gray-900">Permission Matrix Editor</h3>
                <button onclick="closePermissionMatrixModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <div class="p-6">
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Select Role</label>
                <select id="matrix-role-select" 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    <option value="">Select a role...</option>
                </select>
            </div>
            
            <div id="permission-matrix-content" class="mt-6">
                <p class="text-gray-500 text-center">Select a role to edit permissions</p>
            </div>
        </div>
    </div>
</div>

<script>
function showPermissionMatrixEditor() {
    document.getElementById('permission-matrix-modal').classList.remove('hidden');
    loadRolesForMatrix();
}

function closePermissionMatrixModal() {
    document.getElementById('permission-matrix-modal').classList.add('hidden');
}

function loadRolesForMatrix() {
    fetch('/admin/api/roles/')
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                const select = document.getElementById('matrix-role-select');
                select.innerHTML = '<option value="">Select a role...</option>';
                data.data.forEach(role => {
                    const option = document.createElement('option');
                    option.value = role.id;
                    option.textContent = role.displayName || role.name;
                    select.appendChild(option);
                });
                
                select.addEventListener('change', function() {
                    if (this.value) {
                        loadPermissionMatrix(this.value);
                    }
                });
            }
        });
}

function loadPermissionMatrix(roleId) {
    // TODO: Load permission matrix for role
    document.getElementById('permission-matrix-content').innerHTML = 
        '<p class="text-gray-500 text-center">Loading permissions...</p>';
    
    // This would load the actual permission matrix
    // For now, show a placeholder
    setTimeout(() => {
        document.getElementById('permission-matrix-content').innerHTML = 
            '<p class="text-gray-500 text-center">Permission matrix editor coming soon...</p>';
    }, 500);
}
</script>

